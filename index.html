<!DOCTYPE html>
<html>
<head>
  <title>IronCAD Catalog Icon Creator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      background-color: #f1f1f1;
    }

    .container {
      max-width: 720px;
      width: 100%;
      padding: 20px;
      background-color: white;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      border-radius: 5px;
    }

    .color-selector,
    .shape-selector,
    .text-input,
    .preview,
    .download-btn,
    .text-below-download {
      display: flex;
      justify-content: center;
      margin-bottom: 20px;
    }

    .preview canvas {
      width: 48px;
      height: 48px;
    }

    input[type="text"] {
      width: 300px;
      padding: 10px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
    }

    .color-selector {
      align-items: center;
    }

    .color-palette-icon::before {
      content: "ðŸŽ¨";
      font-size: 32px;
      margin-right: 10px;
    }

    .color-selector input[type="color"] {
      width: 50px;
      height: 50px;
      border: none;
      padding: 0;
      cursor: pointer;
    }

    .shape-selector button {
      margin: 0 5px;
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 4px;
      background-color: #999;
      color: white;
      cursor: pointer;
    }

    .shape-selector button.active {
      background-color: #666;
    }

    .download-btn button {
      display: block;
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 4px;
      background-color: #4CAF50;
      color: white;
      cursor: pointer;
    }

    .text-below-download a {
      text-decoration: none;
      color: #4CAF50;
    }

    h1 {
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>IronCAD Catalog Icon Creator âœ¨</h1>
    <div class="color-selector">
      <div class="color-palette-icon"></div>
      <input type="color" id="text-color-picker" value="#000000">
    </div>
    <div class="shape-selector">
      <button id="circle-btn" class="active">Circle</button>
      <button id="rectangle-btn">Rectangle</button>
      <button id="triangle-btn">Triangle</button>
    </div>
    <div class="text-input">
      <input type="text" id="text-input" placeholder="Enter text here">
    </div>
    <div class="preview">
      <canvas id="preview-canvas" width="48" height="48"></canvas>
    </div>
    <div class="download-btn">
      <button id="download-btn">Download PNG (48x48px)</button>
    </div>
    <div class="text-below-download">
      <a href="https://toycon.softonic.com/">Also you need a this program! .PNGs to .ICOs</a>
    </div>
  </div>

  <script>
    const canvas = document.getElementById('preview-canvas');
    const ctx = canvas.getContext('2d');
    const textInput = document.getElementById('text-input');
    const textColorPicker = document.getElementById('text-color-picker');
    const circleBtn = document.getElementById('circle-btn');
    const rectangleBtn = document.getElementById('rectangle-btn');
    const triangleBtn = document.getElementById('triangle-btn');
    const downloadBtn = document.getElementById('download-btn');

    let currentShape = 'circle';
    let currentTextColor = '#000000';

    function drawPreview() {
      // Clear the canvas
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Draw the shape based on the current selection
      switch (currentShape) {
        case 'circle':
          ctx.beginPath();
          ctx.arc(24, 24, 24, 0, 2 * Math.PI);
          ctx.fillStyle = currentTextColor;
          ctx.fill();
          break;
        case 'rectangle':
          ctx.fillStyle = currentTextColor;
          ctx.fillRect(0, 0, 48, 48);
          break;
        case 'triangle':
          drawTriangle(24, 48, 48, 48, currentTextColor);
          break;
      }

      // Set the text color based on the luminance of the background
      const bgColor = ctx.getImageData(0, 0, canvas.width, canvas.height).data;
      const luminance = (0.299 * bgColor[0] + 0.587 * bgColor[1] + 0.114 * bgColor[2]) / 255;
      const textColor = luminance > 0.5 ? '#000000' : '#ffffff';
      ctx.fillStyle = textColor;
      ctx.font = '16px Arial';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText(textInput.value, 24, 24);
    }

    function drawTriangle(x, y, base, height, color) {
      ctx.beginPath();
      ctx.moveTo(x - base / 2, y);
      ctx.lineTo(x + base / 2, y);
      ctx.lineTo(x, y - height);
      ctx.closePath();
      ctx.fillStyle = color;
      ctx.fill();
    }

    textInput.addEventListener('input', () => {
      drawPreview();
    });

    textColorPicker.addEventListener('input', () => {
      currentTextColor = textColorPicker.value;
      const luminance = (0.299 * parseInt(currentTextColor.slice(1, 3), 16) + 0.587 * parseInt(currentTextColor.slice(3, 5), 16) + 0.114 * parseInt(currentTextColor.slice(5, 7), 16)) / 255;
      textInput.style.color = luminance > 0.5 ? '#000000' : '#ffffff';
      drawPreview();
    });

    circleBtn.addEventListener('click', () => {
      currentShape = 'circle';
      circleBtn.classList.add('active');
      rectangleBtn.classList.remove('active');
      triangleBtn.classList.remove('active');
      drawPreview();
    });

    rectangleBtn.addEventListener('click', () => {
      currentShape = 'rectangle';
      circleBtn.classList.remove('active');
      rectangleBtn.classList.add('active');
      triangleBtn.classList.remove('active');
      drawPreview();
    });

    triangleBtn.addEventListener('click', () => {
      currentShape = 'triangle';
      circleBtn.classList.remove('active');
      rectangleBtn.classList.remove('active');
      triangleBtn.classList.add('active');
      drawPreview();
    });

    downloadBtn.addEventListener('click', () => {
      const link = document.createElement('a');
      link.download = 'icon.png';
      link.href = canvas.toDataURL('image/png', 1.0);
      link.click();
    });

    drawPreview();
  </script>
</body>
</html>
